<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="Certified fire flow testing for hydrants following NFPA 291 standards. Serving municipalities, property managers, and contractors across the GTA, Hamilton, and Niagara regions with professional water distribution expertise." />
  <meta name="keywords" content="fire flow testing, hydrant testing, NFPA 291, water distribution, fire safety, municipal services, GTA, Hamilton, Niagara, certified operator, OTM Book 7, temporary traffic control, hydrant API, fire hydrant data integration" />
  <link rel="icon" type="image/png" href="trident-logo.png" />
  <title>Fire Flow Testing | NFPA 291 & OTM Book 7 Compliant | Trident Systems Ontario</title>
  <style> ... (EXISTING CSS OMITTED FOR BREVITY) ... </style>
  <script>
    let current = 0; let slides; window.addEventListener("load", () => { slides = document.querySelectorAll(".slider img"); if (slides.length > 0) { slides[current].classList.add("active"); setInterval(() => { slides[current].classList.remove("active"); current = (current + 1) % slides.length; slides[current].classList.add("active"); }, 4000); } });
  </script>
</head>
<body>
  ... (BODY CONTENT OMITTED FOR BREVITY) ...

  <script>
    document.addEventListener("DOMContentLoaded", function() {
      const slides = document.querySelectorAll(".slider img");
      let current = 0;
      function showSlide(idx) { slides.forEach((img, i) => { img.classList.toggle("active", i === idx); }); }
      showSlide(current);
      setInterval(() => { current = (current + 1) % slides.length; showSlide(current); }, 4000);
    });
  </script>
    <!-- Simple Chatbot Widget (add after your main content) -->
<div id="trident-chatbot" style="position:fixed;bottom:24px;right:24px;z-index:2000;">
  <button onclick="openBot()" style="padding:12px 20px;background:#007ACC;color:#fff;font-weight:bold;border:none;border-radius:26px;box-shadow:0 2px 10px #0002;">ðŸ’¬ Ask TridentBot</button>
  <div id="chatbox" style="display:none;background:#fff;width:330px;max-width:94vw;height:370px;box-shadow:0 4px 32px #0003;border-radius:16px;margin-top:12px;">
    <div style="padding:12px 16px;font-weight:bold;color:#007ACC;border-bottom:1px solid #eee;">TridentBot</div>
    <div id="msgs" style="padding:14px 10px 8px 10px;max-height:234px;overflow-y:auto;font-size:1em;"></div>
    <form id="chatbot-form" onsubmit="return sendMsg();" style="padding:8px 10px 10px 10px;">
      <input id="input" autocomplete="off" placeholder="Ask about hydrant testing..." style="width:76%;padding:7px 10px;border:1px solid #bbb;border-radius:6px;margin-right:7px;">
      <button type="submit" style="background:#007ACC;color:#fff;padding:7px 12px;border:none;border-radius:6px;">Send</button>
    </form>
  </div>
</div>
<script>
function openBot() {
  document.getElementById('chatbox').style.display = (document.getElementById('chatbox').style.display === 'block' ? 'none' : 'block');
}
function appendMsg(msg, who='user') {
  const msgs = document.getElementById('msgs');
  let bubble = document.createElement('div');
  bubble.innerHTML = `<span style="display:inline-block;max-width:84%;background:${who==='user'?'#e6f1f9':'#007ACC'};color:${who==='user'?'#007ACC':'#fff'};border-radius:10px;padding:8px 10px;margin:3px 6px;text-align:left;${who==='user'?'float:right':'float:left'}">${msg}</span><div style="clear:both"></div>`;
  msgs.appendChild(bubble); msgs.scrollTop = msgs.scrollHeight;
}
async function sendMsg() {
  let input = document.getElementById('input');
  let q = input.value.trim(); if (!q) return false;
  appendMsg(q, 'user'); input.value = '';
  appendMsg('<span style="color:#007ACC;font-style:italic;">Thinkingâ€¦</span>', 'bot');
  try {
    const resp = await fetch('https://tridentsys-production.up.railway.app/v1/chat', {
      method: 'POST', headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({ question: q, role: "client" })
    });
    let rj = await resp.json(), answer = rj.answer || (rj.detail ? rj.detail : "Sorry, no answer.");
    document.querySelectorAll('#msgs div').forEach(e => { if(e.innerText.includes('Thinkingâ€¦')) e.remove(); });
    appendMsg(answer, 'bot');
  } catch(err) {
    document.querySelectorAll('#msgs div').forEach(e => { if(e.innerText.includes('Thinkingâ€¦')) e.remove(); });
    appendMsg("Sorry, there was an error connecting to the bot.", 'bot');
  }
  return false;
}
document.getElementById('chatbot-form').onsubmit = function() { return sendMsg(); }
</script>
</body>
</html>
